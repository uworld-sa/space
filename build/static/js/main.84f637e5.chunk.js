(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(63)},29:function(e,t,a){},30:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(21),s=a.n(r),o=(a(29),a(6)),c=a(7),h=a(10),l=a(8),d=a(9),u=(a(30),a(4)),m=a(1),p=a(22),g=a.n(p),v=a(23),b=a.n(v),f=function(){function e(t,a,i,n){Object(o.a)(this,e),this.G=n.G,this.dt=n.dt,this.grid=n.sizeArea,this.divisions=n.divisions,this.scene=t,this.camera=a,this.renderer=i,this.game=Object.assign({},n.objects),this.params=n,this.gridHelper={}}return Object(c.a)(e,[{key:"initMiniStars",value:function(){for(var e=new m.Geometry,t=new m.PointsMaterial({color:12303291,sizeAttenuation:!1}),a=0;a<45e3;a++){var i=new m.Vector3;i.x=2*Math.random()-1,i.y=2*Math.random()-1,i.z=2*Math.random()-1,i.multiplyScalar(this.params.sizeArea/2),e.vertices.push(i)}var n=new m.Points(e,t);n.scale.set(50,50,50),this.scene.add(n),this.gridHelper=new m.GridHelper(this.grid,this.divisions),this.gridHelper.userData={grid:this.grid,divisions:this.divisions},this.scene.add(this.gridHelper)}},{key:"initObjects",value:function(){for(var e in this.game){if(this.game[e].precalculate={},this.game[e].geometry=new m.SphereGeometry(this.game[e].radius*this.game[e].needResize,40,40),void 0!==this.game[e].texture){var t=(new m.TextureLoader).load(this.game[e].texture);this.game[e].material=new m.MeshBasicMaterial({map:t})}else this.game[e].material=new m.MeshBasicMaterial({color:this.game[e].color});this.game[e].three=new m.Mesh(this.game[e].geometry,this.game[e].material),this.game[e].three.userData={radius:this.game[e].radius,needResize:this.game[e].needResize},this.game[e].three.position.x=this.game[e].x,this.game[e].three.position.y=this.game[e].y,this.game[e].three.position.z=this.game[e].z,this.scene.add(this.game[e].three)}}},{key:"updateSpace",value:function(e){for(var t in this.dt=e.dt,this.gridHelper.userData.grid===e.sizeArea&&this.gridHelper.userData.divisions===e.divisions||(this.scene.remove(this.gridHelper),this.gridHelper=new m.GridHelper(e.sizeArea,e.divisions),this.gridHelper.userData={grid:e.sizeArea,divisions:e.divisions},this.scene.add(this.gridHelper)),this.gridHelper.visible=e.showGrid,this.game){if(void 0===e.objects[t].texture){var a=new m.Color(e.objects[t].color);this.game[t].color=e.objects[t].color,this.game[t].three.material.setValues({color:a})}var i=e.objects[t].radius*e.objects[t].needResize/e.objects[t].three.userData.radius/e.objects[t].three.userData.needResize;this.game[t].three.scale.set(i,i,i)}}},{key:"calculateFx",value:function(e,t){var a=e.three.position.distanceTo(t.three.position);return this.G*t.weight/Math.pow(a,3)*(t.three.position.x-e.three.position.x)}},{key:"calculateFy",value:function(e,t){var a=e.three.position.distanceTo(t.three.position);return this.G*t.weight/Math.pow(a,3)*(t.three.position.y-e.three.position.y)}},{key:"calculateFz",value:function(e,t){var a=e.three.position.distanceTo(t.three.position);return this.G*t.weight/Math.pow(a,3)*(t.three.position.z-e.three.position.z)}},{key:"calculateMotions",value:function(){for(var e in this.game)this.game[e].three.position.x+=this.game[e].vx*this.dt,this.game[e].three.position.y+=this.game[e].vy*this.dt,this.game[e].three.position.z+=this.game[e].vz*this.dt;for(var t in this.game){var a=0,i=0,n=0;for(var r in this.game)t!==r&&(a+=this.calculateFx(this.game[t],this.game[r]),i+=this.calculateFy(this.game[t],this.game[r]),n+=this.calculateFz(this.game[t],this.game[r]));this.game[t].precalculate={Fx:a,Fy:i,Fz:n}}for(var s in this.game)this.game[s].vx+=this.game[s].precalculate.Fx*this.dt,this.game[s].vy+=this.game[s].precalculate.Fy*this.dt,this.game[s].vz+=this.game[s].precalculate.Fz*this.dt}}]),e}(),y=(a(40),a(3)),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).handleUpdate=a.handleUpdate.bind(Object(u.a)(Object(u.a)(a))),a.handleUpdateObject=a.handleUpdateObject.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"hexToRgb",value:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}},{key:"handleUpdate",value:function(e,t){var a=Object.assign({},this.props.params);a[t]=e,this.props.onGuiChange(a)}},{key:"handleUpdateObject",value:function(e,t,a){var i=Object.assign({},this.props.params);i.objects[a][t]="color"===t?"rgb(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,")"):e,this.props.onGuiChange(i)}},{key:"render",value:function(){var e,t=this,a=this.props.params,i={};for(var r in a.objects){var s=new m.Color(a.objects[r].color).getHexString();i[r]=this.hexToRgb("#"+s)}return e=a.play?n.a.createElement(y.Button,{label:"Stop animation",onClick:function(){return t.handleUpdate(!a.play,"play")}}):n.a.createElement(y.Button,{label:"Play animation",onClick:function(){return t.handleUpdate(!a.play,"play")}}),n.a.createElement(y.GUI,{expanded:!1},e,n.a.createElement(y.Number,{label:"dt",value:a.dt,onChange:function(e){return t.handleUpdate(e,"dt")}}),n.a.createElement(y.Number,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u043e\u0441\u043c\u043e\u0441\u0430",value:a.sizeArea,onChange:function(e){return t.handleUpdate(e,"sizeArea")}}),n.a.createElement(y.Number,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0435\u0442\u043a\u0438",value:a.divisions,min:5,max:200,step:1,onFinishChange:function(e){return t.handleUpdate(e,"divisions")}}),n.a.createElement(y.Checkbox,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0435\u0442\u043a\u0443",checked:a.showGrid,onChange:function(e){return t.handleUpdate(e,"showGrid")}}),a.objects.map(function(e,a){return n.a.createElement(y.Folder,{key:a,label:e.name,expanded:!1},n.a.createElement(y.Number,{label:"\u041c\u0430\u0441\u0441\u0430 \u043a\u0433",value:e.weight,onChange:function(e){return t.handleUpdateObject(e,"weight",a)}}),n.a.createElement(y.Number,{label:"\u0420\u0430\u0434\u0438\u0443\u0441 \u043a\u043c",value:e.radius,onChange:function(e){return t.handleUpdateObject(e,"radius",a)}}),n.a.createElement(y.Number,{label:"\u0423\u043c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u0440\u0430\u0434\u0438\u0443\u0441\u0430",value:e.needResize,step:1,onChange:function(e){return t.handleUpdateObject(e,"needResize",a)}}),function(){if(void 0===e.material)return n.a.createElement(y.Color,{label:"Color",expanded:!1,red:i[a].r,green:i[a].g,blue:i[a].b,onFinishChange:function(e){return t.handleUpdateObject(e,"color",a)}})}())}))}}]),t}(i.Component),z={G:6.67408e-11/1e3,dt:365,sizeArea:3e9,divisions:10,camera:{x:0,y:0,z:3e8},objects:[{name:"Sun",weight:1.9885e30,radius:695700,needResize:10,texture:"images/textures/sunmap.jpg",color:"rgb(255, 0, 0)",x:-225635.4271511951,y:1132679.762573425,z:-5672.921174540708,vx:-14.35872953662852,vy:1.779506244485902,vz:.3737310085128446},{name:"Mercury",weight:3.302e23,radius:2440,needResize:1e3,texture:"images/textures/mercurymap.jpg",color:"rgb(255, 0, 0)",x:-34864648.51120884,y:-58502841.47890126,z:-1701007.796612002,vx:32282.66436261626,vy:-22131.6356094433,vz:-4771.073247910603},{name:"Venus",weight:4.8685e24,radius:6051.84,needResize:1e3,texture:"images/textures/venusmap.jpg",color:"rgb(255, 0, 0)",x:35581274.44818084,y:-101634372.223016,z:-3482094.754754119,vx:32821.40342104274,vy:11406.62710741241,vz:-1738.009831561365},{name:"Earth",weight:5.97219e24,radius:6371.01,needResize:1e3,texture:"images/textures/earthmap.jpg",color:"rgb(255, 0, 0)",x:-145573346.0945613,y:-34241625.7534002,z:-3267.683441041037,vx:6544.943881962406,vy:-29066.06810798772,vz:2.081526418331592},{name:"Mars",weight:6.4171e23,radius:3389.92,needResize:1e3,texture:"images/textures/marsmap.jpg",color:"rgb(255, 0, 0)",x:-3128784.983630511,y:236131835.3647656,z:4989613.765306219,vx:-23326.48762922359,vy:1760.98794446766,vz:609.2406675678612}]},w=g()(m),x=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).onGuiChange=function(e){a.state.play!==e.play&&(console.log(a.frameId),e.play?(a.start(),console.log("start")):(a.stop(),console.log("stop"))),a.setState({params:e}),a.space.updateSpace(e),a.updateArea(e)},a.start=function(){a.frameId||(a.frameId=requestAnimationFrame(a.animate))},a.stop=function(){cancelAnimationFrame(a.frameId),a.frameId=!1},a.animate=function(){a.space.calculateMotions(),a.count++,a.renderScene(),a.frameId=requestAnimationFrame(a.animate)},a.renderScene=function(){a.renderer.render(a.scene,a.camera)},a.resizeWindow=function(){var e=a.container.clientWidth,t=a.container.clientHeight;a.camera.aspect=e/t,a.camera.updateProjectionMatrix(),a.renderer.setSize(e,t)};var i=Object.assign({},z);return i.showGrid=!0,i.play=!0,a.state={params:Object.assign({},i)},a.onGuiChange=a.onGuiChange.bind(Object(u.a)(Object(u.a)(a))),a.resizeWindow=b()(a.resizeWindow,300),a.space={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.container.clientWidth,t=this.container.clientHeight;this.scene=new m.Scene,this.camera=new m.PerspectiveCamera(75,e/t,.1,this.state.params.sizeArea),this.camera.position.x=this.state.params.camera.x,this.camera.position.y=this.state.params.camera.y,this.camera.position.z=this.state.params.camera.z,this.renderer=new m.WebGLRenderer({antialias:!0}),this.renderer.setSize(e,t),this.orbit=new w(this.camera,this.renderer.domElement),this.orbit.enableZoom=!0,this.orbit.enableKeys=!1,this.space=new f(this.scene,this.camera,this.renderer,this.state.params),this.space.initMiniStars(),this.space.initObjects(),this.container.appendChild(this.renderer.domElement),this.start(),window.addEventListener("resize",this.resizeWindow)}},{key:"updateArea",value:function(e){this.camera.far!==e.sizeArea&&(this.camera.far=e.sizeArea,this.camera.updateProjectionMatrix())}},{key:"componentWillUnmount",value:function(){this.stop(),this.container.removeChild(this.renderer.domElement),window.removeEventListener("resize",this.resizeWindow)}},{key:"render",value:function(){var e=this,t=this.state.params;return n.a.createElement("div",{className:"threejs-app"},n.a.createElement("div",{className:"scene",ref:function(t){return e.container=t}}),n.a.createElement(j,{params:t,onGuiChange:this.onGuiChange}))}}]),t}(i.Component),O=function(e){function t(e){return Object(o.a)(this,t),Object(h.a)(this,Object(l.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(x,null))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.84f637e5.chunk.js.map